((function(){var a,b,c;c=this,b=c.j3=function(){return b.$.apply(this,arguments)},b.version="0.0.1",b.has=function(a,b){return a.hasOwnProperty(b)},b.$=c.jQuery||function(a){return typeof a=="string"?a.indexOf("#")===0?document.getElementById(a.substr(1)):null:a},a=b.ext=function(a,b){var c;for(c in b)a[c]=b[c]},b.cls=function(a,b){var c,d,e,f;return arguments.length===1&&(b=a,a=null),a&&(d=a.prototype.ctor),e=b.ctor,d?e?b.ctor=function(){return d.apply(this,arguments),e.apply(this,arguments)}:b.ctor=function(){return d.apply(this,arguments)}:e||(member.ctor=function(){}),c=b.ctor,f=c.prototype,a&&this.ext(f,a.prototype),this.ext(f,b),this.has(b,"toString")&&(f.toString=b.toString),c.base=function(){return a.prototype},c},b.UA=function(){var a,b,c,d;return b={ie:0,gecko:0,webkit:0,opera:0,name:"",N_IE:"MSIE",N_FIREFOX:"Firefox",N_OPERA:"Opera",N_CHROME:"Chrome",N_SAFARI:"Safari"},c=navigator.userAgent,c.indexOf(b.N_IE)>-1?(b.ie=!0,b.name=b.N_IE):c.indexOf(b.N_FIREFOX)>-1?(b.gecko=!0,b.name=b.N_FIREFOX):c.indexOf(b.N_OPERA)>-1?(b.opera=!0,b.name=b.N_OPERA):c.indexOf(b.N_CHROME)>-1?(b.webkit=!0,b.name=b.N_CHROME):c.indexOf(b.N_SAFARI)>-1&&(b.webkit=!0,b.name=b.N_SAFARI),b.name===b.N_OPERA||b.name===b.N_SAFARI?a=c.indexOf("Version")+8:a=c.indexOf(b.name)+b.name.length+1,d=parseFloat(c.substring(a,a+4).match(/\d+\.\d{1}/i)[0]),b.ie?b.ie=d:b.gecko?b.gecko=d:b.opera?b.opera=d:b.webkit&&(b.webkit=d),b}(),b.UA.ie>=8||b.UA.opera||b.UA.webkit?b.StringBuilder=b.cls({ctor:function(){this._data=""},append:function(a){return this._data+=a,this},clear:function(){return this._data="",this},toString:function(){return this._data}}):b.StringBuilder=b.cls({ctor:function(){this._data=[]},append:function(a){return this._data[this._data.length]=a,this},clear:function(){return this._data=[],this},toString:function(){return this._data.join("")}}),function(){var a;return a=document.createElement("div"),b.append=function(b,c){var d;if(!b)return;if(typeof c=="string"){a.innerHTML=c;if(a.childNodes.length>1){d=[];while(a.firstChild)d[d.length]=b.appendChild(a.firstChild);return d}return b.appendChild(a.firstChild)}return b.appendChild(c)}}(),b.List=b.cls({ctor:function(){this._count=0},firstNode:function(){return this._firstNode},first:function(){return this._firstNode.value},lastNode:function(){return this._lastNode},last:function(){return this._lastNode.value},count:function(){return this._count},insertNode:function(a,b){return a.list=this,this._first?b?(a.next=b,a.prev=b.prev,b.prev=a,a.prev?a.prev.next=a:this._first=a):(a.next=null,a.prev=this._last,this._last.next=a,this._last=a):(a.prev=a.next=null,this._first=this._last=a),this._count++,this},insert:function(a,b){return this.insertNode({value:a},b)},removeNode:function(a){return a&&(a===this._first?this._first=a.next:a.prev.next=a.next,a===this._last?this._last=a.prev:a.next.prev=a.prev,this._count--,delete a.value,delete a.prev,delete a.next,delete a.list),this},remove:function(a){return this.removeNode(this.findNode(a))},clear:function(){var a,b;b=this._first;while(b)a=b.next,delete b.value,delete b.prev,delete b.next,delete b.list,b=a;return this._first=this._last=null,this._count=0},findNode:function(a){var b;b=this._first;if(a&&a.equals)while(b){if(a.equals(b.value))return b;b=b.next}else while(b){if(a===b.value)return b;b=b.next}return null},contains:function(a){return null!==this.findNode(a)},getNodeByIndex:function(a){var b;if(a<0||a>this._count)return null;b=this._first;while(a--)b=b.next;return b},getByIndex:function(a){var b;b=this.getNodeByIndex(a);if(b)return b.value},toString:function(){var a,c;c=new b.StringBuilder,c.append("["),a=this._first;if(a){c.append(a.value.toString());while(a)c.append(","),c.append(a.value.toString()),a=a.next}return c.append("]"),c.toString()},forEach:function(a,b,c){var d;d=this._first;while(d)a.call(b,d.value,c),d=d.next},tryUntil:function(a,b,c){var d;d=this._first;while(d){if(a.call(b,d.value,c))return d.value;d=d.next}},doWhile:function(a,b,c){var d;d=this._first;while(d){if(!a.call(b,d.value,c))return d.value;d=d.next}}}),b.EventManager={on:function(a,c,d){var e,f,g;this._eventHandlers||(this._eventHandlers={});if(arguments.length===1){g=a;for(f in g)e=this._eventHandlers[f],e||(this._eventHandlers[f]=e=new b.List),e.insert({handler:g[f],context:null})}else e=this._eventHandlers[a],e||(this._eventHandlers[a]=e=new b.List),e.insert({handler:c,context:d});return this},off:function(a,b,c){var d;return this._eventHandlers?(d=this._eventHandlers[a],d?(d.removeNode(d.findNode({handler:b,context:c,equals:function(a){return this.handler===a.handler&&this.context===a.context}})),this):this):this},fire:function(a,b,c){var d;return this._eventHandlers?(d=this._eventHandlers[a],d?(d.forEach(function(a){return a.handler.call(a.context,b,c)}),this):this):this}},b.View=function(){var a,c,d,e;return d=0,c=0,e=function(){var a,b;this.el=$("#"+this.id);if(this.children){a=this.children.first();while(a)e.call(a.value),a=a.next}return b=this._options,this.onCreated&&this.onCreated(b),b.on&&this.on(b.on)},a=b.cls({ctor:function(a){var f;c++,a==null&&(a={}),this._options=a,this.id=a.id||"v_"+ ++d,this.parent=a.parent,this.ctnr=$(a.ctnr),this.onInit&&this.onInit(a),this.innerHTML=a.innerHTML,this.createChildren&&this.createChildren(a),c--;if(!this.parent||c===0)f=new b.StringBuilder,this.render(f),this.ctnr.append(f.toString()),e.call(this);return delete this._options},render:function(a){this.onRender(a,this.getViewData())},onRender:function(a,b){a.append(this.template(b))},getViewData:function(){return{id:this.id,css:this.css}}}),b.ext(a.prototype,b.EventManager),a}(),b.ContainerView=b.cls(b.View,{onRender:function(a,b){return this.renderBegin(a,b),this.innerHTML?a.append(this.innerHTML):this.children&&this.renderChildren(a),this.renderEnd(a,b)},renderBegin:function(a,b){a.append(this.templateBegin(b))},renderEnd:function(a,b){a.append(this.templateEnd(b))},renderChildren:function(a){var b;b=this.children.first();while(b)b.value.render(a),b=b.next}}),b.Button=b.cls(b.View,{css:"btn",template:_.template('<button type="<%=primary ? "submit" : "button"%>" id="<%=id%>" class="<%=css%>"<%if(disabled){%> disabled="disabled"<%}%>><%=text%></button>'),onInit:function(a){return this._text=a.text||"",this._primary=!!a.primary,this._disabled=!!a.disabled},getViewData:function(){return{id:this.id,css:this.css+(this._primary?" "+this.css+"-primary":"")+(this._disabled?" disabled":""),text:this._text,primary:this._primary,disabled:this._disabled}},onCreated:function(){var a=this;return this.el.click(function(){return a.fire("click",a)})},getText:function(){return this._text},setText:function(a){return this._text=a||"",this.el.innerHTML=this._text},getDisabled:function(){return this._disabled},setDisabled:function(a){return this._disabled=!!a,this.el.attr("disabled",this._disabled),this.el.toggleClass("disabled")}}),b.Textbox=b.cls(b.View,{css:"input",templateInput:_.template('<input type="<%=type%>" id="<%=id%>" class="<%=css%>"<%if(disabled){%> disabled="disabled"<%}%><%if(readonly){%> readonly="readonly"<%}%> value="<%-text%>" />'),templateTextarea:_.template('<textarea id="<%=id%>" class="<%=css%>"<%if(disabled){%> disabled="disabled"<%}%><%if(readonly){%> readonly="readonly"<%}%>><%-text%></textarea>'),onInit:function(a){return this._text=a.text||"",this._primary=!!a.primary,this._disabled=!!a.disabled,this._readonly=!!a.readonly,this._type=a.type||"text",this._multiline=this._type==="text"&&!!a.multiline},getViewData:function(){return{id:this.id,css:this.css+(this._disabled?" disabled":""),text:this._text,disabled:this._disabled,readonly:this._readonly,type:this._type}},onRender:function(a){var b;this._multiline?b=this.templateTextarea:b=this.templateInput,a.append(b(this.getViewData()))},onCreated:function(){var a=this;return this.el.focus(function(){return a.fire("focus",a)}),this.el.blur(function(){return a.fire("blur",a)}),this.el.keyup(function(){var b;b=a.el.attr("value");if(a.getText!==b)return a._text=b,a.fire("change",a)})},getText:function(){return this._text},setText:function(a){a=a||"";if(this._text===a)return;return this._text=a,this.el.attr("value",this._text),this.fire("change",this)},getDisabled:function(){return this._disabled},setDisabled:function(a){return this._disabled=!!a,this.el.attr("disabled",this._disabled),this.el.toggleClass("disabled")},getReadonly:function(){return this._readonly},setDisabled:function(a){return this._readonly=!!a,this.el.attr("readonly",this._readonly)}}),b.Selector=b.cls(b.View,{css:"sel",template:_.template('<div id="<%=id%>" class="<%=css%>"<%if(disabled){%> disabled="disabled"<%}%>><input type="text" class="<%=css%>-input" /><button type="button" class="<%=css%>-trigger"><i class="<%=cssTrigger%>"></i></button></div>'),onInit:function(a){return this._disabled=!!a.disabled},getViewData:function(){return{id:this.id,css:this.css+(this._disabled?" disabled":""),cssTrigger:this.cssTrigger,disabled:this._disabled}},getDisabled:function(){return this._disabled},setDisabled:function(a){return this._disabled=!!a,this.el.toggleClass("disabled")}}),b.Dropdown=b.cls(b.Selector,{cssTrigger:"icon-drp-down",onCreated:function(){var a=this;this.el.find("button").on("click",function(){return a.toggle()})},isDropdown:function(){return this._isDropdown},toggle:function(){this._isDropdown?this.close():this.dropdown()},dropdown:function(){var a,b;b=!this._elDropdownBox,this.fire("beforeDropdown",this,{firstTime:b}),b&&(a=document.createElement("div"),a.className="drp-box",this._elDropdownBox=$(a),this.el.append(a),this.onCreateDropdownBox(this._elDropdownBox)),this._elDropdownBox.show(),this.fire("dropdown",this,{firstTime:b}),this._isDropdown=!0},close:function(){this._elDropdownBox&&this._elDropdownBox.hide(),this.fire("close",this),this._isDropdown=!1}}),b.DropdownList=b.cls(b.Dropdown,{onInit:function(a){var c,d,e,f,g;b.DropdownList.base().onInit.call(this,a),d=a.items,e=new b.List;if(d)if(_.isArray(d))for(f=0,g=d.length;f<g;f++)c=d[f],c.value==null&&(c.value=c.text),e.insert(c);else d instanceof b.List&&(d.forEach(function(a){return a.value==null&&(a.value=a.text),e.insert(a)}),this._items=a.items);return this._items=e,this._value=a.value},onCreateDropdownBox:function(a){var c,d=this;return c=new b.StringBuilder,c.append('<ul class="drp-list">'),this._items&&this._items.forEach(function(a){return c.append("<li"),a.value===d._value&&c.append(' class="active"'),c.append("><a>"+a.text+"</a></li>")}),c.append("</ul>"),a.append(c.toString()),a.on("click a",function(a){return alert(a.target)})},getItems:function(){return this._items},setItems:function(a){return this._items=a}})})).call(this);